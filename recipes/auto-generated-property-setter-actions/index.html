<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Auto-Generated Property Setter Actions · MobX-state-tree</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This recipe was [originally developed by Infinite Red](https://shift.infinite.red/a-mobx-state-tree-shortcut-for-setter-actions-ac88353df060)."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Auto-Generated Property Setter Actions · MobX-state-tree"/><meta property="og:type" content="website"/><meta property="og:url" content="https://mobx-state-tree.js.org//"/><meta property="og:description" content="This recipe was [originally developed by Infinite Red](https://shift.infinite.red/a-mobx-state-tree-shortcut-for-setter-actions-ac88353df060)."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-65632006-4', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://codefund.io/properties/635/funder.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="MobX-state-tree"/><h2 class="headerTitleWithLogo">MobX-state-tree</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/intro/welcome" target="_self">Documentation</a></li><li class=""><a href="/API/" target="_self">TypeDocs</a></li><li class=""><a href="https://opencollective.com/mobx" target="_self">Sponsor</a></li><li class=""><a href="https://github.com/mobxjs/mobx-state-tree" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recipes</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/intro/welcome">Welcome to MobX-State-Tree!</a></li><li class="navListItem"><a class="navItem" href="/intro/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/intro/getting-started">Getting Started Tutorial</a></li><li class="navListItem"><a class="navItem" href="/intro/examples">Examples</a></li><li class="navListItem"><a class="navItem" href="/intro/philosophy">Overview &amp; Philosophy</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Basic Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/concepts/trees">Types, models, trees &amp; state</a></li><li class="navListItem"><a class="navItem" href="/concepts/actions">Actions</a></li><li class="navListItem"><a class="navItem" href="/concepts/views">Derived values</a></li><li class="navListItem"><a class="navItem" href="/concepts/using-react">React and MST</a></li><li class="navListItem"><a class="navItem" href="/concepts/snapshots">Snapshots</a></li><li class="navListItem"><a class="navItem" href="/concepts/references">Identifiers and references</a></li><li class="navListItem"><a class="navItem" href="/concepts/async-actions">Asynchronous actions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Advanced Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/concepts/patches">Patches</a></li><li class="navListItem"><a class="navItem" href="/concepts/listeners">Listening to changes</a></li><li class="navListItem"><a class="navItem" href="/concepts/dependency-injection">Dependency Injection</a></li><li class="navListItem"><a class="navItem" href="/concepts/middleware">Middleware</a></li><li class="navListItem"><a class="navItem" href="/concepts/reconciliation">Reconciliation</a></li><li class="navListItem"><a class="navItem" href="/concepts/volatiles">Volatile state</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/overview/types">Types overview</a></li><li class="navListItem"><a class="navItem" href="/overview/api">API overview</a></li><li class="navListItem"><a class="navItem" href="/overview/hooks">Lifecycle hooks overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tips<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/tips/resources">Talks &amp; Blogs</a></li><li class="navListItem"><a class="navItem" href="/tips/faq">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/tips/typescript">TypeScript and MST</a></li><li class="navListItem"><a class="navItem" href="/tips/circular-deps">Circular dependencies</a></li><li class="navListItem"><a class="navItem" href="/tips/inheritance">Simulating inheritance</a></li><li class="navListItem"><a class="navItem" href="/tips/snapshots-as-values">Using snapshots as values</a></li><li class="navListItem"><a class="navItem" href="/tips/more-tips">Miscellaneous Tips</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Compare<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/compare/context-reducer-vs-mobx-state-tree">React Context vs. MobX-State-Tree</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Recipes<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/recipes/auto-generated-property-setter-actions">Auto-Generated Property Setter Actions</a></li><li class="navListItem"><a class="navItem" href="/recipes/pre-built-form-types-with-mst-form-type">Pre-built Form Types with MST Form Type</a></li><li class="navListItem"><a class="navItem" href="/recipes/mst-query">Manage Asynchronous Data with mst-query</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/mobxjs/mobx-state-tree/edit/master/docs/recipes/auto-generated-property-setter-actions.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Auto-Generated Property Setter Actions</h1></header><article><div><span><p>This recipe was <a href="https://shift.infinite.red/a-mobx-state-tree-shortcut-for-setter-actions-ac88353df060">originally developed by Infinite Red</a>.</p>
<p>If you want to modify your MobX-State-Tree model properties, you usually have to write one setter per-property. In a model with two fields, that looks like this:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { types } <span class="hljs-keyword">from</span> <span class="hljs-string">"mobx-state-tree"</span>

<span class="hljs-keyword">const</span> UserModel = types
  .model(<span class="hljs-string">"User"</span>, {
    name: types.string,
    age: types.number
  })
  .actions(<span class="hljs-function">(<span class="hljs-params">self</span>) =&gt;</span> ({
    setName(newName: <span class="hljs-built_in">string</span>) {
      self.name = newName
    },
    setAge(newAge: <span class="hljs-built_in">number</span>) {
      self.age = newAge
    }
  }))
</code></pre>
<p>As your model grows in size and complexity, these setter actions can be tedious to write, and increase your source file size, making it harder to read through the actual logic of your model.</p>
<p>You can write a generic action in your model, like this:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { types, SnapshotIn } <span class="hljs-keyword">from</span> <span class="hljs-string">"mobx-state-tree"</span>
<span class="hljs-keyword">const</span> UserModel = types
  .model(<span class="hljs-string">"User"</span>, {
    name: types.string,
    age: types.number
  })
  .actions(<span class="hljs-function">(<span class="hljs-params">self</span>) =&gt;</span> ({
    setProp&lt;K <span class="hljs-keyword">extends</span> keyof SnapshotIn&lt;<span class="hljs-keyword">typeof</span> self&gt;, V <span class="hljs-keyword">extends</span> SnapshotIn&lt;<span class="hljs-keyword">typeof</span> self&gt;[K]&gt;(
      field: K,
      newValue: V
    ) {
      self[field] = newValue
    }
  }))
<span class="hljs-keyword">const</span> user = UserModel.create({ name: <span class="hljs-string">"Jamon"</span>, age: <span class="hljs-number">40</span> })
user.setProp(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Joe"</span>) <span class="hljs-comment">// all good!</span>
<span class="hljs-comment">// typescript will error, like it's supposed to</span>
user.setProp(<span class="hljs-string">"age"</span>, <span class="hljs-string">"shouldn't work"</span>)
</code></pre>
<p>Or, if you want to extract that for easier reuse across different models, you can write a helper, like this:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { IStateTreeNode, SnapshotIn } <span class="hljs-keyword">from</span> <span class="hljs-string">"mobx-state-tree"</span>

<span class="hljs-comment">// This custom type helps TS know what properties can be modified by our returned function. It excludes actions and views, but still correctly infers model properties for auto-complete and type safety.</span>
<span class="hljs-keyword">type</span> OnlyProperties&lt;T&gt; = {
  [K <span class="hljs-keyword">in</span> keyof SnapshotIn&lt;T&gt;]: K <span class="hljs-keyword">extends</span> keyof T ? T[K] : never
}

<span class="hljs-comment">/**
 * If you include this in your model in an action() block just under your props,
 * it'll allow you to set property values directly while retaining type safety
 * and also is executed in an action. This is useful because often you find yourself
 * making a lot of repetitive setter actions that only update one prop.
 *
 * E.g.:
 *
 *  const UserModel = types.model("User")
 *    .props({
 *      name: types.string,
 *      age: types.number
 *    })
 *    .actions(withSetPropAction)
 *
 *   const user = UserModel.create({ name: "Jamon", age: 40 })
 *
 *   user.setProp("name", "John") // no type error
 *   user.setProp("age", 30)      // no type error
 *   user.setProp("age", "30")    // type error -- must be number
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> withSetPropAction = &lt;T <span class="hljs-keyword">extends</span> IStateTreeNode&gt;<span class="hljs-function">(<span class="hljs-params">mstInstance: T</span>) =&gt;</span> ({
  setProp&lt;K <span class="hljs-keyword">extends</span> keyof OnlyProperties&lt;T&gt;, V <span class="hljs-keyword">extends</span> SnapshotIn&lt;T&gt;[K]&gt;(field: K, newValue: V) {
    ;(mstInstance <span class="hljs-keyword">as</span> T &amp; OnlyProperties&lt;T&gt;)[field] = newValue
  }
})
</code></pre>
<p>You can use the helper in a model like so:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { t } <span class="hljs-keyword">from</span> <span class="hljs-string">"mobx-state-tree"</span>
<span class="hljs-keyword">import</span> { withSetPropAction } <span class="hljs-keyword">from</span> <span class="hljs-string">"./withSetPropAction"</span>

<span class="hljs-keyword">const</span> Person = t
  .model(<span class="hljs-string">"Person"</span>, {
    name: t.string
  })
  .views(<span class="hljs-function">(<span class="hljs-params">self</span>) =&gt;</span> ({
    <span class="hljs-keyword">get</span> lowercaseName() {
      <span class="hljs-keyword">return</span> self.name.toLowerCase()
    }
  }))
  .actions(<span class="hljs-function">(<span class="hljs-params">self</span>) =&gt;</span> ({
    setName(name: <span class="hljs-built_in">string</span>) {
      self.name = name
    }
  }))
  .actions(withSetPropAction)

<span class="hljs-keyword">const</span> you = Person.create({
  name: <span class="hljs-string">"your name"</span>
})

you.setProp(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Another Name"</span>)

<span class="hljs-comment">// These will all trigger runtime errors. They are included to demonstrate TS support for</span>
<span class="hljs-comment">// withSetPropAction.</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// @ts-expect-error - this should error because it's the wrong type for name.</span>
  you.setProp(<span class="hljs-string">"name"</span>, <span class="hljs-number">123</span>)
  <span class="hljs-comment">// @ts-expect-error - this should error since 'nah' is not a property.</span>
  you.setProp(<span class="hljs-string">"nah"</span>, <span class="hljs-number">123</span>)
  <span class="hljs-comment">// @ts-expect-error - we cannot set views like we can with properties.</span>
  you.setProp(<span class="hljs-string">"lowercaseName"</span>, <span class="hljs-string">"your name"</span>)
  <span class="hljs-comment">// @ts-expect-error - we cannot set actions like we can with properties.</span>
  you.setProp(<span class="hljs-string">"setName"</span>, <span class="hljs-string">"your name"</span>)
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-built_in">console</span>.error(e)
}
</code></pre>
<p><a href="https://codesandbox.io/p/sandbox/set-prop-action-ts-fix-p5psk7?file=%2Fsrc%2Findex.ts%3A9%2C23">See this working in CodeSandbox</a>.</p>
<p>This is a type-safe way to reduce boilerplate and make your MobX-State-Tree models more readable.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/compare/context-reducer-vs-mobx-state-tree"><span class="arrow-prev">← </span><span class="function-name-prevnext">React Context vs. MobX-State-Tree</span></a><a class="docs-next button" href="/recipes/pre-built-form-types-with-mst-form-type"><span>Pre-built Form Types with MST Form Type</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/favicon.ico" alt="MobX-state-tree" width="66" height="58"/></a><div><h5>Docs</h5><a href="/intro/getting-started">Getting Started</a><a href="/concepts/trees">Basic concepts</a><a href="/concepts/patches">Advanced concepts</a><a href="/overview/types">API Reference</a></div><div><h5>Community</h5><a href="https://github.com/mobxjs/mobx-state-tree/discussions" target="_blank" rel="noreferrer noopener">GitHub Discussions</a><a href="https://stackoverflow.com/questions/tagged/mobx-state-tree" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/mobxjs/mobx-state-tree">GitHub</a><a class="github-button" href="https://github.com/mobxjs/mobx-state-tree" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2024 Michel Weststrate</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'b7b0cfe7d1c8fa6db6089df94a3128f1',
                indexName: 'mobx-state-tree',
                inputSelector: '#search_input_react'
              });
            </script></body></html>